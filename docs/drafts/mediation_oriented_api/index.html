<p>In this variation of the <a href="consumers.md#the-provider-api">Provider API</a>, we modify the <a href="consumers.md#the-permission-oriented-variation">Permission-oriented</a> variation to:</p>
<ul>
<li>Bundle the prompts to unify the case where the users opt-into using an undirected profile.</li>
<li>Allow the user agent to pick defaults (e.g opt-out vs opt-in) and control the use of <a href="directed_basic_profile.md">directed profiles</a>.</li>
</ul>
<p>The fundamental modification to achieve these goals is allow the browser to mediate the sign-in flow:</p>
<p><img src="static/mock15.svg" alt=""></p>
<p>In this formulation, we solve the cross-browser consistency by leveraging the IDP: specifically, the IDP tells the browser whether a given flow is a sign-up or sign-in. A consequence of this is that the IDP must learn at least the RPâ€™s origin before the browser UI is painted. This flow is similar to <a href="permission_oriented_api.md">Permission-oriented API</a> in that it makes the assumption that IDPs can learn the RP's origin after a user gesture on the RP page.</p>
<p><img src="static/mock18.svg" alt=""></p>
<h1>Benefits</h1>
<ul>
<li>Fewer prompts compared to the <a href="consumers.md#the-permission-oriented-variation">Permission-oriented</a> variation</li>
<li>Prompts are &quot;functional&quot; (part of a decision the user has to make) rather than &quot;informational&quot; (speed bumps)</li>
<li>The browser has the ability to control the defaults</li>
</ul>
<h1>Challenges</h1>
<ul>
<li>Ossification: Browsers need to become opinionated about sign-in and the subset of flows that enables it.</li>
<li>User comprehension: the browser UI is displaying data (including T&amp;Cs) provided by the IDP. Will users get confused and take it as browser provided data or that the browser has fully vetted the IDP?</li>
</ul>
